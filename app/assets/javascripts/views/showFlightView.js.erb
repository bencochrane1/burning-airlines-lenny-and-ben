var App = App || {};

App.ShowFlightView = Backbone.View.extend ({

  initialize: function() {
    console.log(this.collection);
  },

  render: function() {
    console.log("something");

    console.log(this.model.toJSON());
    this.$el.html(JST['flights/show'](this.model.toJSON()));

    var plane_id = this.model.get('plane_id');
    console.log(plane_id);

    var newPlanes = new App.Planes();
    newPlanes.fetch().then(function(){
        var planeRows = newPlanes.models[plane_id].attributes.rows;
        var planeAisles = newPlanes.models[plane_id].attributes.aisles;
        console.log(planeRows);
        console.log(planeAisles);

        var a = planeRows;
        var b = planeAisles;
      if (a == "" || b == "") {
      alert("Please <e></e>nter some numeric value");
      } else {

      tableElem = document.createElement('table');
      tableElem.setAttribute("class", "u-full-width");
      tableElem.setAttribute("class", "container new-container");
      tableElem.setAttribute("id", "planeTable");

      rowElem = document.createElement('tr');

    for (var j = -1; j < b; j++) {
      colElem = document.createElement('td');
      colElem.appendChild(document.createTextNode(j+1));
      rowElem.appendChild(colElem);
    }

    tableElem.appendChild(rowElem);

    for (var i = 0; i < a; i++) {
       
       rowElem = document.createElement('tr');

      for (var j = 0; j < 1; j++) {
        colElem = document.createElement('td');
        colElem.appendChild(document.createTextNode(i+1)); //to print cell number
        rowElem.appendChild(colElem);
       }

      for (var j = 0; j < b; j++) {
        colElem = document.createElement('td');
        imageElem = document.createElement('img');
        imageElem.src = "//s22.postimg.org/asbid4hcd/seat.png";
        colElem.appendChild(imageElem);
        rowElem.appendChild(colElem);
       }

       tableElem.appendChild(rowElem);
     }

     document.body.appendChild(tableElem);

   }
    });
    return this;
  }







});